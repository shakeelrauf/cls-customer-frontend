{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/mac/Desktop/customer_portal_cls/frontend/src/component/sidebar/Payement/Payment.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport './Payment.css';\nimport axiosInstance, { baseURL } from '../../../api/api';\nimport axios from 'axios';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport { css } from \"@emotion/core\";\nimport { Toast } from 'primereact/toast';\nimport { useRef } from 'react';\nconst override = css`\n  margin: 0 auto;\n  border-color: red;\n  background-color: transparent;\n`;\nconst validEmailRegex = RegExp(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n\nconst Payment = props => {\n  _s();\n\n  const toast = useRef();\n  const initialFormData = Object.freeze({\n    number: '',\n    street: '',\n    postalcode: '',\n    email: '',\n    invoiceNumber: 0,\n    invoiceAmount: 0,\n    loading: false,\n    invoiceModalIsOpen: true\n  });\n  const [formData, setFormData] = useState(initialFormData);\n  useEffect(() => {\n    renderPayment();\n    console.log(props);\n  }, []);\n\n  const renderPayment = async () => {\n    setFormData({ ...formData,\n      loading: true\n    });\n\n    try {\n      const api = `${baseURL}api/customer/get-payment-token/`;\n      let response = await axios.get(api, {\n        headers: {\n          \"Authorization\": `Bearer ${localStorage.getItem('access_token')}`\n        }\n      });\n      setFormData({ ...formData,\n        token: response.data.token\n      });\n      console.log(response);\n      let authorization = response.data.token; //console.log(authorization);\n\n      var form = document.querySelector('#cardForm');\n      window.braintree.client.create({\n        authorization: authorization\n      }, (err, clientInstance) => {\n        if (err) {\n          console.log(err); //setFormData({...formData,err:err});\n\n          return;\n        }\n\n        createHostedFields(clientInstance, form);\n      });\n\n      const createHostedFields = (clientInstance, form) => {\n        window.braintree.hostedFields.create({\n          client: clientInstance,\n          styles: {\n            'input': {\n              'font-size': '16px',\n              'font-family': 'courier, monospace',\n              'font-weight': 'lighter',\n              'color': '#ccc'\n            },\n            ':focus': {\n              'color': 'black'\n            },\n            '.valid': {\n              'color': '#8bdda8'\n            }\n          },\n          fields: {\n            number: {\n              selector: '#card-number',\n              placeholder: '4111 1111 1111 1111'\n            },\n            cvv: {\n              selector: '#cvv',\n              placeholder: '123'\n            },\n            expirationDate: {\n              selector: '#expiration-date',\n              placeholder: 'MM/YYYY'\n            }\n          }\n        }, hostedFieldsDidCreate);\n      };\n    } catch (error) {\n      console.log(\"Error: \", JSON.stringify(error, null, 4));\n      throw error;\n    }\n  };\n\n  function hostedFieldsDidCreate(err, hostedFields) {\n    setFormData({ ...formData,\n      loading: false\n    });\n    let submitBtn = document.getElementById('submit');\n    submitBtn === null || submitBtn === void 0 ? void 0 : submitBtn.addEventListener('click', e => submitHandler(e, hostedFields));\n    submitBtn === null || submitBtn === void 0 ? void 0 : submitBtn.removeAttribute('disabled');\n  }\n\n  function submitHandler(event, hostedFields) {\n    event.preventDefault();\n    setFormData({ ...formData,\n      loading: true\n    });\n    let submitBtn = document.getElementById('submit');\n    submitBtn === null || submitBtn === void 0 ? void 0 : submitBtn.setAttribute('disabled', 'disabled');\n    console.log(hostedFields);\n    hostedFields.tokenize(function (err, payload) {\n      if (err) {\n        setFormData({ ...formData,\n          loading: false\n        });\n        submitBtn === null || submitBtn === void 0 ? void 0 : submitBtn.removeAttribute('disabled');\n        console.error('Error', err.message);\n        toast.current.show({\n          severity: 'error',\n          detail: err.message\n        });\n      } else {\n        console.log(payload.nonce);\n\n        if (payload.nonce) {\n          if (props.invoiceAddress) {\n            axiosInstance.post(`api/customer/invoice/payment/${props.loc_no}/`, {\n              payment_method_nonce: payload.nonce,\n              location: props.invoiceLocation,\n              address: props.invoiceAddress,\n              amount: props.selectedAmount,\n              list_of_invoice: props.selectedProducts\n            }).then(res => {\n              setFormData({ ...formData,\n                loading: false\n              });\n\n              if (res.data.status === 202) {\n                toast.current.show({\n                  severity: 'success',\n                  detail: 'Payment successful'\n                });\n                setFormData({ ...formData,\n                  invoiceModalIsOpen: false\n                });\n                props.getItem(formData.invoiceModalIsOpen);\n              } else {\n                toast.current.show({\n                  severity: 'error',\n                  detail: 'Payment Denied'\n                });\n              }\n\n              console.log(res);\n            }).catch(error => {\n              setFormData({ ...formData,\n                loading: false\n              });\n              toast.current.show({\n                severity: 'error',\n                detail: 'Server error'\n              });\n            });\n          } else if (props.invoice) {\n            axiosInstance.post(`api/customer/invoice/payment/`, {\n              payment_method_nonce: payload.nonce,\n              amount: props.amount,\n              invoice: props.invoice\n            }).then(res => {\n              setFormData({ ...formData,\n                loading: false\n              });\n\n              if (res.data.status === 202) {\n                toast.current.show({\n                  severity: 'success',\n                  detail: 'Payment successful'\n                });\n              } else {\n                toast.current.show({\n                  severity: 'error',\n                  detail: 'Payment Denied'\n                });\n              }\n\n              console.log(res);\n            }).catch(error => {\n              setFormData({ ...formData,\n                loading: false\n              });\n              toast.current.show({\n                severity: 'error',\n                detail: 'Server error'\n              });\n            });\n          } else if (props.invoiceALLLocation) {\n            axiosInstance.post(`api/customer/invoice/all/payment/`, {\n              payment_method_nonce: payload.nonce,\n              location: props.invoiceALLLocation,\n              amount: props.selectedAmount,\n              list_of_invoice: props.selectedProducts\n            }).then(res => {\n              setFormData({ ...formData,\n                loading: false\n              });\n\n              if (res.data.status === 202) {\n                toast.current.show({\n                  severity: 'success',\n                  detail: 'Payment successful'\n                });\n              } else {\n                toast.current.show({\n                  severity: 'error',\n                  detail: 'Payment Denied'\n                });\n              }\n\n              console.log(res);\n            }).catch(error => {\n              setFormData({ ...formData,\n                loading: false\n              });\n              toast.current.show({\n                severity: 'error',\n                detail: 'Server error'\n              });\n            });\n          } else if (props.quote) {\n            axiosInstance.post(`api/customer/quote/payment/`, {\n              payment_method_nonce: payload.nonce,\n              amount: props.amount,\n              quote: props.quote\n            }).then(res => {\n              setFormData({ ...formData,\n                loading: false\n              });\n\n              if (res.data.status === 202) {\n                toast.current.show({\n                  severity: 'success',\n                  detail: 'Payment successful'\n                });\n              } else {\n                toast.current.show({\n                  severity: 'error',\n                  detail: 'Payment Denied'\n                });\n              }\n\n              console.log(res);\n            }).catch(error => {\n              setFormData({ ...formData,\n                loading: false\n              });\n              toast.current.show({\n                severity: 'error',\n                detail: 'Server error'\n              });\n            });\n          }\n        }\n      }\n    });\n  }\n\n  const formValidation = () => {\n    let isValid = true;\n    /*  let numbers = /[0-9]/g;\n     if(formData.cnumber === ''){\n         isValid = false;\n      }else if(!formData.cnumber.match(numbers)){\n         isValid = false ;\n     }else if(formData.name === ''){\n         isValid = false;\n      }else if(formData.expiry === ''){\n         isValid = false ;\n     }else if(formData.email === ''){\n         isValid = false ;\n     }else if(!validEmailRegex.test(formData.email)){\n         isValid = false ;\n     }else if(formData.cvv === ''){\n         isValid = false ;\n     }else if(!formData.cvv.match(numbers)){\n         isValid = false ;\n     }else if(formData.number === ''){\n         isValid = false ;\n     }else if(!formData.number.match(numbers)){\n         isValid = false ;\n     }else if(formData.street === ''){\n         isValid = false ;\n     }else if(formData.postalcode === ''){\n         isValid = false ;\n     } */\n\n    return isValid;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"MuiPaper-root MuiDialog-paper MuiDialog-paperScrollPaper MuiDialog-paperWidthSm MuiPaper-elevation24 MuiPaper-rounded\",\n      children: [/*#__PURE__*/_jsxDEV(Toast, {\n        ref: toast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"MuiDialogTitle-root\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"MuiTypography-root MuiTypography-h6\",\n          children: \"Pay Invoice\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"MuiDialogContent-root\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"MuiTypography-root MuiDialogContentText-root MuiTypography-body1 MuiTypography-colorTextSecondary\",\n          children: \"Please enter your payment information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"MuiBox-root jss123\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"MuiBox-root jss124\",\n            style: {\n              display: 'flex',\n              flex: '1 1 0px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rccs\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rccs__card rccs__card--unknown\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rccs__card--front\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__card__background\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__issuer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__cvc__front\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__number\",\n                    children: \"\\u2022\\u2022\\u2022\\u2022 \\u2022\\u2022\\u2022\\u2022 \\u2022\\u2022\\u2022\\u2022 \\u2022\\u2022\\u2022\\u2022\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__name\",\n                    children: \"YOUR NAME HERE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__expiry\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"rccs__expiry__valid\",\n                      children: \"valid thru\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 265,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"rccs__expiry__value\",\n                      children: \"\\u2022\\u2022/\\u2022\\u2022\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__chip\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rccs__card--back\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__card__background\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__stripe\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__signature\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__cvc\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rccs__issuer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"MuiBox-root jss125\",\n            style: {\n              display: 'flex',\n              flex: '1 1 0px',\n              paddingLeft: '0.5rem',\n              marginTop: '-3rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"/\",\n              method: \"post\",\n              id: \"cardForm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col\",\n                style: {\n                  padding: '.5rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Card number:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"card-number\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col\",\n                style: {\n                  padding: '.5rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Expiry Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"expiration-date\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col\",\n                style: {\n                  padding: '.5rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"CVV#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"cvv\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overlay-box1\",\n              children: /*#__PURE__*/_jsxDEV(FadeLoader, {\n                css: override,\n                color: \"rgb(0, 158, 214)\",\n                loading: formData.loading,\n                height: 30,\n                width: 5,\n                radius: 2,\n                margin: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this), formValidation() ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginLeft: '4.55rem',\n            marginTop: '1rem'\n          },\n          className: \"btn btn-outline-info\",\n          type: \"submit\",\n          id: \"submit\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"MuiButton-label\",\n            children: \"Submit Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 57\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 27\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginLeft: '4.55rem',\n            marginTop: '1rem'\n          },\n          className: \"btn btn-outline-info\",\n          disabled: true,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"MuiButton-label\",\n            children: \"Submit Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Payment, \"UYHXKln4GflpVqywAMzNtJ340JE=\");\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"sources":["/Users/mac/Desktop/customer_portal_cls/frontend/src/component/sidebar/Payement/Payment.tsx"],"names":["React","useEffect","useState","axiosInstance","baseURL","axios","FadeLoader","css","Toast","useRef","override","validEmailRegex","RegExp","Payment","props","toast","initialFormData","Object","freeze","number","street","postalcode","email","invoiceNumber","invoiceAmount","loading","invoiceModalIsOpen","formData","setFormData","renderPayment","console","log","api","response","get","headers","localStorage","getItem","token","data","authorization","form","document","querySelector","window","braintree","client","create","err","clientInstance","createHostedFields","hostedFields","styles","fields","selector","placeholder","cvv","expirationDate","hostedFieldsDidCreate","error","JSON","stringify","submitBtn","getElementById","addEventListener","e","submitHandler","removeAttribute","event","preventDefault","setAttribute","tokenize","payload","message","current","show","severity","detail","nonce","invoiceAddress","post","loc_no","payment_method_nonce","location","invoiceLocation","address","amount","selectedAmount","list_of_invoice","selectedProducts","then","res","status","catch","invoice","invoiceALLLocation","quote","formValidation","isValid","display","flex","paddingLeft","marginTop","padding","textAlign","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport './Payment.css';\nimport axiosInstance, {baseURL} from '../../../api/api';\nimport axios from 'axios';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport { css } from \"@emotion/core\";\nimport { Toast } from 'primereact/toast';\nimport { useRef } from 'react';\n\nconst override = css`\n  margin: 0 auto;\n  border-color: red;\n  background-color: transparent;\n`;\nconst validEmailRegex = RegExp(\n    /^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i\n  );\n\nconst Payment = (props:any) => {\n    const toast: any = useRef();\n    const initialFormData = Object.freeze({\n         number:'',\n         street:'',\n         postalcode:'',\n         email:'',\n         invoiceNumber:0,\n         invoiceAmount:0,\n         loading:false,\n         invoiceModalIsOpen:true,\n    });\n\n    const [formData, setFormData]:any = useState(initialFormData);\n\n    useEffect(()=> {\n        renderPayment();\n        console.log(props);\n    },[]);\n\n    const renderPayment = async()=> {\n        setFormData({...formData,loading:true});\n        try {\n            const api = `${baseURL}api/customer/get-payment-token/`;\n            let response = await axios.get(api, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('access_token')}`} });\n            setFormData({...formData, token:response.data.token});\n            console.log(response);\n        \n        let authorization = response.data.token;\n        //console.log(authorization);\n        var form = document.querySelector('#cardForm');\n        \n        window.braintree.client.create({\n            authorization: authorization\n        }, (err, clientInstance)=> {\n        if(err){\n            console.log(err);\n            //setFormData({...formData,err:err});\n            return;\n        }\n        createHostedFields(clientInstance, form);\n        });\n\n        const createHostedFields = (clientInstance:any, form:any) => {\n        window.braintree.hostedFields.create({\n            client: clientInstance,\n            styles: {\n                'input': {\n                'font-size': '16px',\n                'font-family': 'courier, monospace',\n                'font-weight': 'lighter',\n                'color': '#ccc'\n                },\n                ':focus': {\n                'color': 'black'\n                },\n                '.valid': {\n                'color': '#8bdda8'\n                }\n            },\n            fields: {\n                number: {\n                selector: '#card-number',\n                placeholder: '4111 1111 1111 1111'\n                },\n                cvv: {\n                selector: '#cvv',\n                placeholder: '123'\n                },\n                expirationDate: {\n                selector: '#expiration-date',\n                placeholder: 'MM/YYYY'\n                }\n            }\n            }, hostedFieldsDidCreate);\n          }\n        }catch(error){\n            console.log(\"Error: \", JSON.stringify(error, null, 4));\n            throw error;\n        }\n    }\n    function hostedFieldsDidCreate(err:any, hostedFields:any) {\n        setFormData({...formData,loading:false});\n        let submitBtn = document.getElementById('submit');\n        submitBtn?.addEventListener('click', (e)=>submitHandler(e, hostedFields));\n        submitBtn?.removeAttribute('disabled');\n      }\n\n      function submitHandler( event:any,hostedFields:any,) {\n        event.preventDefault();\n        setFormData({...formData,loading:true});\n        let submitBtn = document.getElementById('submit');\n        submitBtn?.setAttribute('disabled', 'disabled');\n        console.log(hostedFields);\n        hostedFields.tokenize(function (err:any, payload:any) {\n          if (err) {\n            setFormData({...formData,loading:false});\n            submitBtn?.removeAttribute('disabled');\n            console.error('Error',err.message);\n            toast.current.show({severity: 'error', detail: err.message})\n          } else {\n            console.log(payload.nonce);\n            if(payload.nonce){\n            if(props.invoiceAddress){\n                axiosInstance\n\t\t\t.post(`api/customer/invoice/payment/${props.loc_no}/`, {\n                payment_method_nonce: payload.nonce,\n                location: props.invoiceLocation,\n                address: props.invoiceAddress,\n                amount: props.selectedAmount,\n                list_of_invoice: props.selectedProducts\n\t\t\t})\n\t\t\t.then((res) => {\n                setFormData({...formData,loading:false});\n                if(res.data.status===202){\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\n                    setFormData({...formData, invoiceModalIsOpen:false});\n                    props.getItem(formData.invoiceModalIsOpen);\n                }else{\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\n                }\n                console.log(res);\n            }).catch((error)=>{\n                setFormData({...formData,loading:false});\n                toast.current.show({severity: 'error', detail: 'Server error'});\n            })\n            }else if(props.invoice){\n            axiosInstance\n\t\t\t.post(`api/customer/invoice/payment/`, {\n                payment_method_nonce: payload.nonce,\n                amount: props.amount,\n                invoice: props.invoice\n\t\t\t})\n\t\t\t.then((res) => {\n                setFormData({...formData,loading:false});\n                if(res.data.status===202){\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\n                }else{\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\n                }\n                console.log(res);\n            }).catch((error)=>{\n                setFormData({...formData,loading:false});\n                toast.current.show({severity: 'error', detail: 'Server error'});\n            })\n         }else if(props.invoiceALLLocation){\n            axiosInstance\n\t\t\t.post(`api/customer/invoice/all/payment/`, {\n                payment_method_nonce: payload.nonce,\n                location: props.invoiceALLLocation,\n                amount: props.selectedAmount,\n                list_of_invoice: props.selectedProducts\n\t\t\t})\n\t\t\t.then((res) => {\n                setFormData({...formData,loading:false});\n                if(res.data.status===202){\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\n                }else{\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\n                }\n                console.log(res);\n            }).catch((error)=>{\n                setFormData({...formData,loading:false});\n                toast.current.show({severity: 'error', detail: 'Server error'});\n            })\n         }else if(props.quote){\n            axiosInstance\n\t\t\t.post(`api/customer/quote/payment/`, {\n                payment_method_nonce: payload.nonce,\n                amount: props.amount,\n                quote: props.quote\n\t\t\t})\n\t\t\t.then((res) => {\n                setFormData({...formData,loading:false});\n                if(res.data.status===202){\n                    toast.current.show({severity: 'success', detail: 'Payment successful'});\n                }else{\n                    toast.current.show({severity: 'error', detail: 'Payment Denied'});\n                }\n                console.log(res);\n            }).catch((error)=>{\n                setFormData({...formData,loading:false});\n                toast.current.show({severity: 'error', detail: 'Server error'});\n            })\n        }\n        }\n          }\n        });\n      }\n\n    \n\n\n    const formValidation = () =>{\n        let isValid = true;\n       /*  let numbers = /[0-9]/g;\n        if(formData.cnumber === ''){\n            isValid = false;\n         }else if(!formData.cnumber.match(numbers)){\n            isValid = false ;\n        }else if(formData.name === ''){\n            isValid = false;\n         }else if(formData.expiry === ''){\n            isValid = false ;\n        }else if(formData.email === ''){\n            isValid = false ;\n        }else if(!validEmailRegex.test(formData.email)){\n            isValid = false ;\n        }else if(formData.cvv === ''){\n            isValid = false ;\n        }else if(!formData.cvv.match(numbers)){\n            isValid = false ;\n        }else if(formData.number === ''){\n            isValid = false ;\n        }else if(!formData.number.match(numbers)){\n            isValid = false ;\n        }else if(formData.street === ''){\n            isValid = false ;\n        }else if(formData.postalcode === ''){\n            isValid = false ;\n        } */\n        return isValid\n    }\n    \n    return (\n        <>\n            <div className=\"MuiPaper-root MuiDialog-paper MuiDialog-paperScrollPaper MuiDialog-paperWidthSm MuiPaper-elevation24 MuiPaper-rounded\" >\n              <Toast ref={toast} />\n                <div className=\"MuiDialogTitle-root\">\n                    <h2 className=\"MuiTypography-root MuiTypography-h6\">Pay Invoice</h2>\n                </div>\n                <div className=\"MuiDialogContent-root\">\n                    <p className=\"MuiTypography-root MuiDialogContentText-root MuiTypography-body1 MuiTypography-colorTextSecondary\">\n                        Please enter your payment information</p>\n                    <div className=\"MuiBox-root jss123\">\n                        <div className=\"MuiBox-root jss124\" style={{display: 'flex', flex: '1 1 0px'}}>\n                            <div className=\"rccs\">\n                                <div className=\"rccs__card rccs__card--unknown\">\n                                    <div className=\"rccs__card--front\">\n                                        <div className=\"rccs__card__background\"></div>\n                                        <div className=\"rccs__issuer\"></div>\n                                        <div className=\"rccs__cvc__front\"></div>\n                                        <div className=\"rccs__number\">•••• •••• •••• ••••</div>\n                                        <div className=\"rccs__name\">YOUR NAME HERE</div>\n                                        <div className=\"rccs__expiry\">\n                                            <div className=\"rccs__expiry__valid\">valid thru</div>\n                                            <div className=\"rccs__expiry__value\">••/••</div>\n                                        </div>\n                                        <div className=\"rccs__chip\"></div>\n                                    </div>\n                                    <div className=\"rccs__card--back\">\n                                        <div className=\"rccs__card__background\"></div>\n                                        <div className=\"rccs__stripe\"></div>\n                                        <div className=\"rccs__signature\"></div>\n                                        <div className=\"rccs__cvc\"></div>\n                                        <div className=\"rccs__issuer\"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div className=\"MuiBox-root jss125\" style={{display: 'flex', flex: '1 1 0px', paddingLeft: '0.5rem',marginTop:'-3rem'}}>\n                        <form action=\"/\" method=\"post\" id=\"cardForm\">\n                            <div className=\"col\" style={{padding:'.5rem'}}>\n                                <label>Card number:</label>\n                                <div id='card-number' className='form-control'></div>\n                            </div>\n                            <div className=\"col\" style={{padding:'.5rem'}}>\n                                <label>Expiry Date:</label>\n                            <div id='expiration-date' className='form-control'></div>\n                            </div>\n                            <div className=\"col\" style={{padding:'.5rem'}}>\n                                <label>CVV#</label>\n                            <div id='cvv' className='form-control'></div>\n\n                            </div>\n                        \n                        </form>\n                        <div className='overlay-box1'>\n                            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={formData.loading}  height={30} width={5} radius={2} margin={20} />\n                        </div>\n                            </div>\n                            </div>\n                                {/* <div className=\"MuiBox-root jss130\" style={{minWidth: '450px'}}>\n                                    \n                                        <div className=\"row\" style={{width:'35rem'}}>\n                                            <div className=\"col\" style={{padding:'.25rem'}}>\n                                            <input type=\"text\" className=\"form-control\" name='number' placeholder=\"Number\" onChange={handleInputChange}/>\n                                            </div>\n                                            <div className=\"col\" style={{padding:'.25rem'}}>\n                                            <input type=\"text\" className=\"form-control\" name='street' placeholder=\"Street\" onChange={handleInputChange}/>\n                                            </div>\n                                            <div className=\"col\" style={{padding:'.25rem'}}>\n                                            <input type=\"text\" className=\"form-control\" name='postalcode' placeholder=\"Postal Code\" onChange={handleInputChange}/>\n                                            </div>\n                                        </div>\n                                        \n                                </div>\n                                <div className=\"MuiBox-root jss131\" style={{marginLeft:'-1.1rem'}}>\n                                      <div className=\"col\" style={{padding:'.5rem'}}>\n                                            <input type=\"email\" className=\"form-control\" name='email' placeholder=\"Email\" onChange={handleInputChange}/>\n                                      </div>\n                                    </div> */}\n                </div>         \n                      {   formValidation() ? \n                          <div style={{textAlign:'center'}}>\n                          <button style={{marginLeft:'4.55rem',marginTop:'1rem'}}\n                            className=\"btn btn-outline-info\"\n                             type=\"submit\" id='submit' ><span className=\"MuiButton-label\"  >Submit Payment</span>\n                             </button>\n                          </div> : \n                          <div style={{textAlign:'center'}}>\n                          <button style={{marginLeft:'4.55rem',marginTop:'1rem'}}\n                            className=\"btn btn-outline-info\"\n                              disabled><span className=\"MuiButton-label\">Submit Payment</span>\n                             </button>\n                          </div>\n                      }\n             </div>                \n        \n        </>\n    )\n}\n\nexport default Payment;"]},"metadata":{},"sourceType":"module"}