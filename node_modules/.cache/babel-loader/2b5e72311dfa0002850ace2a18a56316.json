{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/mac/Desktop/customer_portal_cls/frontend/src/component/login/Login.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axiosInstance from '../../api/api';\nimport { Toast } from 'primereact/toast';\nimport { useRef } from 'react';\nimport './Login.css';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport { css } from \"@emotion/core\";\nimport ReactTooltip from 'react-tooltip';\nimport info from \"../icons/info.svg\";\nconst validEmailRegex = RegExp(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\nconst override = css`\n  margin: 0 auto;\n  border-color: red;\n  background-color: transparent;\n  top:35%;\n  margin-left:-15%;\n`;\n\nlet Login = () => {\n  _s();\n\n  let history = useHistory();\n  const mytoast = useRef(null);\n  const initialFormData = Object.freeze({\n    email: '',\n    password: ''\n  });\n  const [formData, setFormData] = useState(initialFormData);\n  const [errorEmail, setErrorEmail] = useState('');\n  const [errorPassword, setErrorPassword] = useState('');\n  let [loading, setLoading] = useState(false);\n  const [remember, setRemember] = useState(false);\n\n  const handleInputChange = e => {\n    let name = e.target.name;\n    let value = e.target.value;\n    setFormData({ ...formData,\n      [name]: value\n    });\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem('email') !== '') {\n      setFormData({ ...formData,\n        email: localStorage.getItem('email'),\n        password: localStorage.getItem('password')\n      });\n    }\n  }, []);\n\n  const formValidation = () => {\n    let errorEmail = '';\n    let errorPassword = '';\n    let isValid = true;\n\n    if (formData.email === '') {\n      errorEmail = '* Please enter a email address';\n      isValid = false;\n    } else if (!validEmailRegex.test(formData.email)) {\n      errorEmail = '* Please enter a valid email address';\n      isValid = false;\n    }\n\n    let lowerCaseLetters = /[a-z]/g;\n    let upperCaseLetters = /[A-Z]/g;\n    let numbers = /[0-9]/g;\n    let specialcharacter = /[!@#\\$%\\^&\\*]/g;\n\n    if (formData.password === '') {\n      errorPassword = '* Please enter a password';\n    } else if (!(formData.password.trim().length >= 8 && formData.password.match(numbers) && formData.password.match(lowerCaseLetters) && formData.password.match(upperCaseLetters) && formData.password.match(specialcharacter))) {\n      errorPassword = '* Please enter a valid password format';\n      isValid = false;\n    }\n\n    setErrorEmail(errorEmail);\n    setErrorPassword(errorPassword);\n    return isValid;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let isValid = formValidation();\n\n    if (isValid) {\n      axiosInstance.post(`/api/customer/login/`, {\n        email: formData.email,\n        password: formData.password\n      }).then(res => {\n        if (remember === true) {\n          localStorage.setItem('email', formData.email);\n          localStorage.setItem('password', formData.password);\n          localStorage.setItem('remember', remember);\n        } else if (remember === false) {\n          localStorage.removeItem('email');\n          localStorage.removeItem('password');\n          localStorage.removeItem('remember');\n        }\n\n        if (res.data.is_active) {\n          localStorage.setItem('access_token', res.data.access);\n          localStorage.setItem('refresh_token', res.data.refresh);\n          localStorage.setItem('username', res.data.username);\n          localStorage.setItem('invoice', res.data.user_access.inv_statements);\n          localStorage.setItem('quotes', res.data.user_access.quotes);\n          localStorage.setItem('service_request', res.data.user_access.service_request);\n          localStorage.setItem('key_finder', res.data.user_access.key_finder);\n          localStorage.setItem('audit', res.data.user_access.audit);\n          localStorage.setItem('user_type', res.data.user_type);\n          axiosInstance.defaults.headers['Authorization'] = 'JWT ' + localStorage.getItem('access_token');\n          setLoading(false);\n\n          if (res.data.user_type === \"primary\") {\n            if (res.data.user_access.inv_statements || res.data.user_access.quotes) {\n              history.push(\"/home/accounting\");\n            } else {\n              history.push(\"/home/companydetails\");\n            }\n          } else if (res.data.user_type === 'additional') {\n            if (res.data.last_login == null) {\n              history.push(\"/changepassword\");\n            } else {\n              if (res.data.user_access.inv_statements || res.data.user_access.quotes) {\n                history.push(\"/home/accounting\");\n              } else {\n                history.push(\"/home/companydetails\");\n              }\n            }\n          }\n        } else {\n          mytoast.current.show({\n            severity: 'error',\n            detail: 'You are Disabled from primary user'\n          });\n        }\n      }).catch(error => {\n        mytoast.current.show({\n          severity: 'error',\n          detail: 'Wrong email or password'\n        });\n        setLoading(false);\n      });\n      setLoading(true);\n    }\n  };\n\n  function reset() {\n    history.push(`/forgot`);\n  }\n\n  function login() {\n    history.push(`/createaccount`);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay-box1\",\n        style: {\n          margin: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(FadeLoader, {\n          css: override,\n          color: \"rgb(0, 158, 214)\",\n          loading: loading,\n          height: 30,\n          width: 5,\n          radius: 2,\n          margin: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 23\n      }, this) : '', /*#__PURE__*/_jsxDEV(Toast, {\n        ref: mytoast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: \"required\",\n        effect: \"solid\",\n        place: \"bottom\",\n        children: \"\\\"Password should be minimum 8 characters with atleast one uppercase, one lowercase, one special character and one numeric value\\\"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center own-login-container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          style: {\n            marginTop: \"4.375rem\"\n          },\n          noValidate: true,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                fontSize: \"1.875rem\",\n                textAlign: \"center\",\n                marginBottom: \"1.563rem\"\n              },\n              children: \"Welcome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"email\",\n              style: {\n                width: \"22.063rem\",\n                height: \"2.5rem\"\n              },\n              type: \"email\",\n              className: \"form-control\",\n              id: \"exampleInputEmail1\",\n              \"aria-describedby\": \"emailHelp\",\n              placeholder: \"Email ID\",\n              value: formData.email,\n              onChange: handleInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"errorMessage\",\n              children: errorEmail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              style: {\n                marginLeft: \"0px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"password\",\n                style: {\n                  width: \"22.063rem\",\n                  height: \"2.5rem\",\n                  paddingRight: '35px'\n                },\n                type: \"password\",\n                className: \"form-control\",\n                id: \"exampleInputPassword1\",\n                placeholder: \"Password\",\n                value: formData.password,\n                onChange: handleInputChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"info\",\n                \"data-for\": \"required\",\n                \"data-tip\": \"required\",\n                style: {\n                  cursor: \"pointer\",\n                  width: '1.25rem',\n                  padding: '0px',\n                  marginLeft: '-1.875rem'\n                },\n                src: info\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"errorMessage\",\n              children: errorPassword\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-check\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  style: {\n                    height: \"1.125rem\",\n                    width: \"1.125rem\",\n                    marginLeft: \"-2.5rem\",\n                    cursor: 'pointer'\n                  },\n                  className: \"form-check-input\",\n                  name: \"remember\",\n                  type: \"checkbox\",\n                  id: \"gridCheck\",\n                  checked: remember,\n                  onChange: e => {\n                    setRemember(e.target.checked);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    marginLeft: \"-0.625rem\",\n                    paddingTop: '0.125rem',\n                    cursor: 'pointer'\n                  },\n                  className: \"form-check-label\",\n                  htmlFor: \"gridCheck\",\n                  children: \"Remember me\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"create\",\n                onClick: reset,\n                style: {\n                  marginLeft: \"5.625rem\"\n                },\n                children: \"Reset Password ?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 24\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                width: \"22.063rem\",\n                height: \"2.5rem\",\n                backgroundColor: \"#009ED6\"\n              },\n              className: \"btn btn-primary\",\n              type: \"submit\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"create mt-2\",\n              onClick: login,\n              style: {\n                fontSize: \"1rem\",\n                color: \"#009ED6\",\n                fontWeight: \"bold\"\n              },\n              children: \"Create Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"Fl/qhPBJLaWCf1lrneT9cvIz8LA=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/mac/Desktop/customer_portal_cls/frontend/src/component/login/Login.tsx"],"names":["useEffect","useState","useHistory","axiosInstance","Toast","useRef","FadeLoader","css","ReactTooltip","validEmailRegex","RegExp","override","Login","history","mytoast","initialFormData","Object","freeze","email","password","formData","setFormData","errorEmail","setErrorEmail","errorPassword","setErrorPassword","loading","setLoading","remember","setRemember","handleInputChange","e","name","target","value","localStorage","getItem","formValidation","isValid","test","lowerCaseLetters","upperCaseLetters","numbers","specialcharacter","trim","length","match","handleSubmit","preventDefault","post","then","res","setItem","removeItem","data","is_active","access","refresh","username","user_access","inv_statements","quotes","service_request","key_finder","audit","user_type","defaults","headers","push","last_login","current","show","severity","detail","catch","error","reset","login","margin","marginTop","fontSize","textAlign","marginBottom","width","height","marginLeft","paddingRight","cursor","padding","info","display","checked","paddingTop","backgroundColor","color","fontWeight"],"mappings":";;;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,aAAP,MAA0B,eAA1B;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,MAAT,QAAuB,OAAvB;AACA,OAAO,aAAP;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,SAASC,GAAT,QAAoB,eAApB;AACA,OAAOC,YAAP,MAAyB,eAAzB;;AAGA,MAAMC,eAAe,GAAGC,MAAM,CAC1B,sCAD0B,CAA9B;AAIE,MAAMC,QAAQ,GAAGJ,GAAI;AACvB;AACA;AACA;AACA;AACA;AACA,CANE;;AASF,IAAIK,KAAK,GAAC,MAAK;AAAA;;AACX,MAAIC,OAAO,GAAGX,UAAU,EAAxB;AACA,QAAMY,OAAW,GAAGT,MAAM,CAAC,IAAD,CAA1B;AAEA,QAAMU,eAAe,GAAGC,MAAM,CAACC,MAAP,CAAc;AACxCC,IAAAA,KAAK,EAAE,EADiC;AAElCC,IAAAA,QAAQ,EAAE;AAFwB,GAAd,CAAxB;AAIA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BpB,QAAQ,CAAMc,eAAN,CAAxC;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BtB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACuB,aAAD,EAAgBC,gBAAhB,IAAoCxB,QAAQ,CAAC,EAAD,CAAlD;AACA,MAAI,CAACyB,OAAD,EAAUC,UAAV,IAAwB1B,QAAQ,CAAM,KAAN,CAApC;AACA,QAAM,CAAC2B,QAAD,EAAWC,WAAX,IAA0B5B,QAAQ,CAAM,KAAN,CAAxC;;AAEA,QAAM6B,iBAAiB,GAAIC,CAAD,IAA+C;AACrE,QAAIC,IAAI,GAAGD,CAAC,CAACE,MAAF,CAASD,IAApB;AACA,QAAIE,KAAK,GAAGH,CAAC,CAACE,MAAF,CAASC,KAArB;AACAb,IAAAA,WAAW,CAAC,EAAC,GAAGD,QAAJ;AAAa,OAACY,IAAD,GAAOE;AAApB,KAAD,CAAX;AACH,GAJD;;AAMAlC,EAAAA,SAAS,CAAC,MAAI;AACV,QAAGmC,YAAY,CAACC,OAAb,CAAqB,OAArB,MAAgC,EAAnC,EAAsC;AACtCf,MAAAA,WAAW,CAAC,EAAC,GAAGD,QAAJ;AAAcF,QAAAA,KAAK,EAAEiB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB;AAAoDjB,QAAAA,QAAQ,EAAGgB,YAAY,CAACC,OAAb,CAAqB,UAArB;AAA/D,OAAD,CAAX;AACC;AACJ,GAJQ,EAIP,EAJO,CAAT;;AAMA,QAAMC,cAAc,GAAG,MAAK;AACxB,QAAIf,UAAU,GAAG,EAAjB;AACA,QAAIE,aAAa,GAAG,EAApB;AACA,QAAIc,OAAO,GAAG,IAAd;;AAEC,QAAGlB,QAAQ,CAACF,KAAT,KAAmB,EAAtB,EAAyB;AACtBI,MAAAA,UAAU,GAAG,gCAAb;AACAgB,MAAAA,OAAO,GAAG,KAAV;AACF,KAHD,MAIA,IAAG,CAAC7B,eAAe,CAAC8B,IAAhB,CAAqBnB,QAAQ,CAACF,KAA9B,CAAJ,EAAyC;AACtCI,MAAAA,UAAU,GAAG,sCAAb;AACAgB,MAAAA,OAAO,GAAG,KAAV;AACH;;AAED,QAAIE,gBAAgB,GAAG,QAAvB;AACA,QAAIC,gBAAgB,GAAG,QAAvB;AACA,QAAIC,OAAO,GAAG,QAAd;AACA,QAAIC,gBAAgB,GAAG,gBAAvB;;AACA,QAAGvB,QAAQ,CAACD,QAAT,KAAsB,EAAzB,EAA4B;AACxBK,MAAAA,aAAa,GAAG,2BAAhB;AACH,KAFD,MAEM,IAAG,EAAEJ,QAAQ,CAACD,QAAT,CAAkByB,IAAlB,GAAyBC,MAAzB,IAAmC,CAAnC,IAAwCzB,QAAQ,CAACD,QAAT,CAAkB2B,KAAlB,CAAwBJ,OAAxB,CAAxC,IAA4EtB,QAAQ,CAACD,QAAT,CAAkB2B,KAAlB,CAAwBN,gBAAxB,CAA5E,IAAyHpB,QAAQ,CAACD,QAAT,CAAkB2B,KAAlB,CAAwBL,gBAAxB,CAAzH,IAAsKrB,QAAQ,CAACD,QAAT,CAAkB2B,KAAlB,CAAwBH,gBAAxB,CAAxK,CAAH,EAAsN;AACxNnB,MAAAA,aAAa,GAAG,wCAAhB;AACAc,MAAAA,OAAO,GAAG,KAAV;AACH;;AACDf,IAAAA,aAAa,CAACD,UAAD,CAAb;AACAG,IAAAA,gBAAgB,CAACD,aAAD,CAAhB;AACA,WAAOc,OAAP;AACH,GA3BD;;AA6BA,QAAMS,YAAY,GAAIhB,CAAD,IAAW;AAC5BA,IAAAA,CAAC,CAACiB,cAAF;AACA,QAAIV,OAAO,GAAGD,cAAc,EAA5B;;AACA,QAAGC,OAAH,EAAW;AACPnC,MAAAA,aAAa,CACrB8C,IADQ,CACF,sBADE,EACqB;AAC7B/B,QAAAA,KAAK,EAAEE,QAAQ,CAACF,KADa;AAEjBC,QAAAA,QAAQ,EAAEC,QAAQ,CAACD;AAFF,OADrB,EAKR+B,IALQ,CAKFC,GAAD,IAAS;AACF,YAAGvB,QAAQ,KAAG,IAAd,EAAmB;AACfO,UAAAA,YAAY,CAACiB,OAAb,CAAqB,OAArB,EAA8BhC,QAAQ,CAACF,KAAvC;AACAiB,UAAAA,YAAY,CAACiB,OAAb,CAAqB,UAArB,EAAiChC,QAAQ,CAACD,QAA1C;AACAgB,UAAAA,YAAY,CAACiB,OAAb,CAAqB,UAArB,EAAiCxB,QAAjC;AACH,SAJD,MAIS,IAAGA,QAAQ,KAAG,KAAd,EAAoB;AACzBO,UAAAA,YAAY,CAACkB,UAAb,CAAwB,OAAxB;AACAlB,UAAAA,YAAY,CAACkB,UAAb,CAAwB,UAAxB;AACAlB,UAAAA,YAAY,CAACkB,UAAb,CAAwB,UAAxB;AACH;;AAED,YAAGF,GAAG,CAACG,IAAJ,CAASC,SAAZ,EACA;AACIpB,UAAAA,YAAY,CAACiB,OAAb,CAAqB,cAArB,EAAqCD,GAAG,CAACG,IAAJ,CAASE,MAA9C;AACArB,UAAAA,YAAY,CAACiB,OAAb,CAAqB,eAArB,EAAsCD,GAAG,CAACG,IAAJ,CAASG,OAA/C;AACAtB,UAAAA,YAAY,CAACiB,OAAb,CAAqB,UAArB,EAAiCD,GAAG,CAACG,IAAJ,CAASI,QAA1C;AACAvB,UAAAA,YAAY,CAACiB,OAAb,CAAqB,SAArB,EAAgCD,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBC,cAArD;AACAzB,UAAAA,YAAY,CAACiB,OAAb,CAAqB,QAArB,EAA+BD,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBE,MAApD;AACA1B,UAAAA,YAAY,CAACiB,OAAb,CAAqB,iBAArB,EAAwCD,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBG,eAA7D;AACA3B,UAAAA,YAAY,CAACiB,OAAb,CAAqB,YAArB,EAAmCD,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBI,UAAxD;AACA5B,UAAAA,YAAY,CAACiB,OAAb,CAAqB,OAArB,EAA8BD,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBK,KAAnD;AACA7B,UAAAA,YAAY,CAACiB,OAAb,CAAqB,WAArB,EAAkCD,GAAG,CAACG,IAAJ,CAASW,SAA3C;AACA9D,UAAAA,aAAa,CAAC+D,QAAd,CAAuBC,OAAvB,CAA+B,eAA/B,IACI,SAAShC,YAAY,CAACC,OAAb,CAAqB,cAArB,CADb;AAEGT,UAAAA,UAAU,CAAC,KAAD,CAAV;;AACH,cAAGwB,GAAG,CAACG,IAAJ,CAASW,SAAT,KAAqB,SAAxB,EAAkC;AAC9B,gBAAGd,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBC,cAArB,IAAuCT,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBE,MAA/D,EAAsE;AAClEhD,cAAAA,OAAO,CAACuD,IAAR,CAAa,kBAAb;AACH,aAFD,MAEM;AACFvD,cAAAA,OAAO,CAACuD,IAAR,CAAa,sBAAb;AACH;AAEJ,WAPD,MAOM,IAAGjB,GAAG,CAACG,IAAJ,CAASW,SAAT,KAAqB,YAAxB,EAAqC;AACvC,gBAAGd,GAAG,CAACG,IAAJ,CAASe,UAAT,IAAqB,IAAxB,EAA6B;AACzBxD,cAAAA,OAAO,CAACuD,IAAR,CAAa,iBAAb;AACH,aAFD,MAEM;AACF,kBAAGjB,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBC,cAArB,IAAuCT,GAAG,CAACG,IAAJ,CAASK,WAAT,CAAqBE,MAA/D,EAAsE;AAClEhD,gBAAAA,OAAO,CAACuD,IAAR,CAAa,kBAAb;AACD,eAFH,MAEQ;AACJvD,gBAAAA,OAAO,CAACuD,IAAR,CAAa,sBAAb;AACD;AACN;AACJ;AACJ,SAhCD,MAgCM;AACFtD,UAAAA,OAAO,CAACwD,OAAR,CAAgBC,IAAhB,CAAqB;AAACC,YAAAA,QAAQ,EAAE,OAAX;AAAoBC,YAAAA,MAAM,EAAE;AAA5B,WAArB;AACH;AACJ,OAnDD,EAoDCC,KApDD,CAoDQC,KAAD,IAAS;AACZ7D,QAAAA,OAAO,CAACwD,OAAR,CAAgBC,IAAhB,CAAqB;AAACC,UAAAA,QAAQ,EAAE,OAAX;AAAoBC,UAAAA,MAAM,EAAE;AAA5B,SAArB;AACA9C,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH,OAvDD;AAwDAA,MAAAA,UAAU,CAAC,IAAD,CAAV;AAEH;AAEJ,GAhED;;AAkEA,WAASiD,KAAT,GAAiB;AACb/D,IAAAA,OAAO,CAACuD,IAAR,CAAc,SAAd;AACA;;AACJ,WAASS,KAAT,GAAiB;AACbhE,IAAAA,OAAO,CAACuD,IAAR,CAAc,gBAAd;AACA;;AACF,sBACI;AAAA,4BACF;AAAA,iBAEI1C,OAAO,gBAAG;AAAK,QAAA,SAAS,EAAC,cAAf;AAA8B,QAAA,KAAK,EAAE;AAACoD,UAAAA,MAAM,EAAC;AAAR,SAArC;AAAA,+BACV,QAAC,UAAD;AAAY,UAAA,GAAG,EAAEnE,QAAjB;AAA2B,UAAA,KAAK,EAAE,kBAAlC;AAAsD,UAAA,OAAO,EAAEe,OAA/D;AAAyE,UAAA,MAAM,EAAE,EAAjF;AAAqF,UAAA,KAAK,EAAE,CAA5F;AAA+F,UAAA,MAAM,EAAE,CAAvG;AAA0G,UAAA,MAAM,EAAE;AAAlH;AAAA;AAAA;AAAA;AAAA;AADU;AAAA;AAAA;AAAA;AAAA,cAAH,GAEF,EAJT,eAMA,QAAC,KAAD;AAAO,QAAA,GAAG,EAAEZ;AAAZ;AAAA;AAAA;AAAA;AAAA,cANA,eAOA,QAAC,YAAD;AAAc,QAAA,EAAE,EAAC,UAAjB;AAA2B,QAAA,MAAM,EAAC,OAAlC;AAA0C,QAAA,KAAK,EAAC,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPA;AAAA;AAAA;AAAA;AAAA;AAAA,YADE,eAYF;AAAA,6BAEI;AAAK,QAAA,SAAS,EAAC,mDAAf;AAAA,+BAEA;AAAM,UAAA,QAAQ,EAAEiC,YAAhB;AAA8B,UAAA,KAAK,EAAE;AAACgC,YAAAA,SAAS,EAAC;AAAX,WAArC;AAA6D,UAAA,UAAU,MAAvE;AAAA,kCACI;AAAA,mCACE;AAAO,cAAA,KAAK,EAAE;AAACC,gBAAAA,QAAQ,EAAC,UAAV;AAAqBC,gBAAAA,SAAS,EAAC,QAA/B;AAAwCC,gBAAAA,YAAY,EAAC;AAArD,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACI;AAAO,cAAA,IAAI,EAAC,OAAZ;AAAoB,cAAA,KAAK,EAAE;AAACC,gBAAAA,KAAK,EAAC,WAAP;AAAmBC,gBAAAA,MAAM,EAAC;AAA1B,eAA3B;AAAgE,cAAA,IAAI,EAAC,OAArE;AAA6E,cAAA,SAAS,EAAC,cAAvF;AAAsG,cAAA,EAAE,EAAC,oBAAzG;AAA8H,kCAAiB,WAA/I;AAA2J,cAAA,WAAW,EAAC,UAAvK;AAAkL,cAAA,KAAK,EAAEhE,QAAQ,CAACF,KAAlM;AAAyM,cAAA,QAAQ,EAAEY,iBAAnN;AAAuO,cAAA,QAAQ;AAA/O;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAM,cAAA,SAAS,EAAC,cAAhB;AAAA,wBAAgCR;AAAhC;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAQI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,KAAf;AAAqB,cAAA,KAAK,EAAE;AAAC+D,gBAAAA,UAAU,EAAC;AAAZ,eAA5B;AAAA,sCACI;AAAO,gBAAA,IAAI,EAAC,UAAZ;AAAwB,gBAAA,KAAK,EAAE;AAACF,kBAAAA,KAAK,EAAC,WAAP;AAAmBC,kBAAAA,MAAM,EAAC,QAA1B;AAAmCE,kBAAAA,YAAY,EAAC;AAAhD,iBAA/B;AAAwF,gBAAA,IAAI,EAAC,UAA7F;AAAwG,gBAAA,SAAS,EAAC,cAAlH;AAAiI,gBAAA,EAAE,EAAC,uBAApI;AAA4J,gBAAA,WAAW,EAAC,UAAxK;AAAmL,gBAAA,KAAK,EAAElE,QAAQ,CAACD,QAAnM;AAA6M,gBAAA,QAAQ,EAAEW,iBAAvN;AAA0O,gBAAA,QAAQ;AAAlP;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAK,gBAAA,GAAG,EAAC,MAAT;AAAgB,4BAAS,UAAzB;AAAoC,4BAAS,UAA7C;AAAwD,gBAAA,KAAK,EAAE;AAACyD,kBAAAA,MAAM,EAAC,SAAR;AAAmBJ,kBAAAA,KAAK,EAAC,SAAzB;AAAmCK,kBAAAA,OAAO,EAAC,KAA3C;AAAiDH,kBAAAA,UAAU,EAAC;AAA5D,iBAA/D;AAAyI,gBAAA,GAAG,EAAEI;AAA9I;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAKI;AAAM,cAAA,SAAS,EAAC,cAAhB;AAAA,wBAAgCjE;AAAhC;AAAA;AAAA;AAAA;AAAA,oBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBARJ,eAeI;AAAK,YAAA,KAAK,EAAE;AAACkE,cAAAA,OAAO,EAAC;AAAT,aAAZ;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,YAAf;AAAA,wCACI;AAAO,kBAAA,KAAK,EAAE;AAACN,oBAAAA,MAAM,EAAC,UAAR;AAAmBD,oBAAAA,KAAK,EAAC,UAAzB;AAAoCE,oBAAAA,UAAU,EAAC,SAA/C;AAA0DE,oBAAAA,MAAM,EAAC;AAAjE,mBAAd;AAA2F,kBAAA,SAAS,EAAC,kBAArG;AAAwH,kBAAA,IAAI,EAAC,UAA7H;AAAwI,kBAAA,IAAI,EAAC,UAA7I;AAAwJ,kBAAA,EAAE,EAAC,WAA3J;AAAuK,kBAAA,OAAO,EAAE3D,QAAhL;AAA0L,kBAAA,QAAQ,EAAGG,CAAD,IAAK;AAACF,oBAAAA,WAAW,CAACE,CAAC,CAACE,MAAF,CAAS0D,OAAV,CAAX;AAA8B;AAAxO;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAO,kBAAA,KAAK,EAAE;AAACN,oBAAAA,UAAU,EAAC,WAAZ;AAAwBO,oBAAAA,UAAU,EAAC,UAAnC;AAA8CL,oBAAAA,MAAM,EAAC;AAArD,mBAAd;AAAgF,kBAAA,SAAS,EAAC,kBAA1F;AAA6G,kBAAA,OAAO,EAAC,WAArH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eASI;AAAA,qCACG;AAAO,gBAAA,SAAS,EAAC,QAAjB;AAA0B,gBAAA,OAAO,EAAEX,KAAnC;AAA0C,gBAAA,KAAK,EAAE;AAACS,kBAAAA,UAAU,EAAC;AAAZ,iBAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,oBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAfJ,eA8BI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,mCACI;AAAQ,cAAA,KAAK,EAAE;AAACF,gBAAAA,KAAK,EAAC,WAAP;AAAmBC,gBAAAA,MAAM,EAAC,QAA1B;AAAmCS,gBAAAA,eAAe,EAAC;AAAnD,eAAf;AAA8E,cAAA,SAAS,EAAC,iBAAxF;AAA0G,cAAA,IAAI,EAAC,QAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBA9BJ,eAiCI;AAAA,mCACI;AAAO,cAAA,SAAS,EAAC,aAAjB;AAA+B,cAAA,OAAO,EAAEhB,KAAxC;AAA+C,cAAA,KAAK,EAAE;AAACG,gBAAAA,QAAQ,EAAC,MAAV;AAAiBc,gBAAAA,KAAK,EAAC,SAAvB;AAAiCC,gBAAAA,UAAU,EAAC;AAA5C,eAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAjCJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YAZE;AAAA,kBADJ;AA6DD,CA5LL;;GAAInF,K;UACcV,U;;;KADdU,K;AA8LJ,eAAeA,KAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axiosInstance from '../../api/api';\nimport { Toast } from 'primereact/toast';\nimport { useRef } from 'react';\nimport './Login.css';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport { css } from \"@emotion/core\";\nimport ReactTooltip from 'react-tooltip';\nimport info from '../icons/info.svg';\n\nconst validEmailRegex = RegExp(\n    /^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i\n  );\n\n  const override = css`\n  margin: 0 auto;\n  border-color: red;\n  background-color: transparent;\n  top:35%;\n  margin-left:-15%;\n`;\n  \n\nlet Login=()=> {\n    let history = useHistory()\n    const mytoast:any = useRef(null);\n\n    const initialFormData = Object.freeze({\n\t\temail: '',\n        password: '',\n    });\n    const [formData, setFormData] = useState<any>(initialFormData);\n    const [errorEmail, setErrorEmail] = useState('');\n    const [errorPassword, setErrorPassword] = useState('');\n    let [loading, setLoading] = useState<any>(false);\n    const [remember, setRemember] = useState<any>(false);\n\n    const handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\n        let name = e.target.name;\n        let value = e.target.value;\n        setFormData({...formData,[name]:value});\n    };\n    \n    useEffect(()=>{\n        if(localStorage.getItem('email')!==''){\n        setFormData({...formData, email: localStorage.getItem('email'), password : localStorage.getItem('password')});\n        }\n    },[]) \n\n    const formValidation = () =>{\n        let errorEmail = '';\n        let errorPassword = '';\n        let isValid = true;\n\n         if(formData.email === ''){\n            errorEmail = '* Please enter a email address';\n            isValid = false;\n         }else\n         if(!validEmailRegex.test(formData.email)){\n            errorEmail = '* Please enter a valid email address';\n            isValid = false ;\n        }\n            \n        let lowerCaseLetters = /[a-z]/g;\n        let upperCaseLetters = /[A-Z]/g;\n        let numbers = /[0-9]/g;\n        let specialcharacter = /[!@#\\$%\\^&\\*]/g;\n        if(formData.password === ''){\n            errorPassword = '* Please enter a password';\n        }else if(!(formData.password.trim().length >= 8 && formData.password.match(numbers) && formData.password.match(lowerCaseLetters) && formData.password.match(upperCaseLetters) && formData.password.match(specialcharacter))){\n            errorPassword = '* Please enter a valid password format';\n            isValid = false;\n        }\n        setErrorEmail(errorEmail);\n        setErrorPassword(errorPassword);\n        return isValid\n    }\n\n    const handleSubmit = (e:any) => {\n        e.preventDefault();\n        let isValid = formValidation();\n        if(isValid){\n            axiosInstance\n\t\t\t.post(`/api/customer/login/`, {\n\t\t\t\temail: formData.email,\n                password: formData.password,\n\t\t\t})\n\t\t\t.then((res) => {\n                if(remember===true){\n                    localStorage.setItem('email', formData.email );\n                    localStorage.setItem('password', formData.password );\n                    localStorage.setItem('remember', remember);\n                }   else if(remember===false){\n                    localStorage.removeItem('email');\n                    localStorage.removeItem('password');\n                    localStorage.removeItem('remember');\n                }\n\n                if(res.data.is_active)\n                {  \n                    localStorage.setItem('access_token', res.data.access);\n                    localStorage.setItem('refresh_token', res.data.refresh);\n                    localStorage.setItem('username', res.data.username);\n                    localStorage.setItem('invoice', res.data.user_access.inv_statements);\n                    localStorage.setItem('quotes', res.data.user_access.quotes);\n                    localStorage.setItem('service_request', res.data.user_access.service_request);\n                    localStorage.setItem('key_finder', res.data.user_access.key_finder);\n                    localStorage.setItem('audit', res.data.user_access.audit);\n                    localStorage.setItem('user_type', res.data.user_type);\n                    axiosInstance.defaults.headers['Authorization'] =\n                        'JWT ' + localStorage.getItem('access_token');\n                       setLoading(false);\n                    if(res.data.user_type===\"primary\"){\n                        if(res.data.user_access.inv_statements || res.data.user_access.quotes){\n                            history.push(\"/home/accounting\");\n                        }else {\n                            history.push(\"/home/companydetails\");\n                        }\n                        \n                    }else if(res.data.user_type==='additional'){\n                        if(res.data.last_login==null){\n                            history.push(\"/changepassword\");\n                        }else {\n                            if(res.data.user_access.inv_statements || res.data.user_access.quotes){\n                                history.push(\"/home/accounting\");\n                              }else {\n                                history.push(\"/home/companydetails\");\n                              }\n                        }\n                    }\n                }else {\n                    mytoast.current.show({severity: 'error', detail: 'You are Disabled from primary user'});\n                }\n            })\n            .catch((error)=>{\n                mytoast.current.show({severity: 'error', detail: 'Wrong email or password'});\n                setLoading(false);\n            })\n            setLoading(true);\n\n        }\n         \n    }\n\n    function reset() {\n        history.push(`/forgot`);\n       }\n    function login() {\n        history.push(`/createaccount`);\n       }\n      return (\n          <>\n        <div>\n        {\n            loading ? <div className='overlay-box1' style={{margin:0}}>\n            <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\n         </div> :''\n        }\n        <Toast ref={mytoast} />\n        <ReactTooltip id=\"required\"effect=\"solid\" place=\"bottom\" >\n           \"Password should be minimum 8 characters with atleast one uppercase, one lowercase, one special character and one numeric value\"\n        </ReactTooltip>\n        </div>\n        <div >\n            \n            <div className=\"d-flex justify-content-center own-login-container\">\n            \n            <form onSubmit={handleSubmit} style={{marginTop:\"4.375rem\"}} noValidate>\n                <div>\n                  <label style={{fontSize:\"1.875rem\",textAlign:\"center\",marginBottom:\"1.563rem\"}}>Welcome</label>\n                </div>\n                <div className=\"form-group\">\n                    <input name=\"email\" style={{width:\"22.063rem\",height:\"2.5rem\"}} type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Email ID\" value={formData.email} onChange={handleInputChange}  required/>\n                    <span className=\"errorMessage\">{errorEmail}</span>\n                </div>\n                <div className=\"form-group\">\n                    <div className=\"row\" style={{marginLeft:\"0px\"}}>\n                        <input name=\"password\"  style={{width:\"22.063rem\",height:\"2.5rem\",paddingRight:'35px'}} type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" value={formData.password} onChange={handleInputChange} required/>\n                        <img alt=\"info\" data-for=\"required\" data-tip=\"required\" style={{cursor:\"pointer\", width:'1.25rem',padding:'0px',marginLeft:'-1.875rem'}} src={info}/>\n                    </div>\n                    <span className=\"errorMessage\">{errorPassword}</span>\n                </div>\n                <div style={{display:\"flex\"}} >\n                    <div className=\"form-group\">\n                        <div className=\"form-check\">\n                            <input style={{height:\"1.125rem\",width:\"1.125rem\",marginLeft:\"-2.5rem\" ,cursor:'pointer'}} className=\"form-check-input\" name='remember' type=\"checkbox\" id=\"gridCheck\" checked={remember} onChange={(e)=>{setRemember(e.target.checked)}}/>\n                            <label style={{marginLeft:\"-0.625rem\",paddingTop:'0.125rem',cursor:'pointer'}}  className=\"form-check-label\" htmlFor=\"gridCheck\">\n                                Remember me\n                            </label>\n                        </div>\n                    </div>\n                    <div>\n                       <label className=\"create\" onClick={reset} style={{marginLeft:\"5.625rem\"}}>\n                            Reset Password ?\n                        </label>\n                    </div>\n                </div>\n                <div className=\"form-group\">\n                    <button style={{width:\"22.063rem\",height:\"2.5rem\",backgroundColor:\"#009ED6\"}} className=\"btn btn-primary\" type=\"submit\">Login</button>\n                </div>\n                <div>\n                    <label className=\"create mt-2\" onClick={login} style={{fontSize:\"1rem\",color:\"#009ED6\",fontWeight:\"bold\"}}>\n                       Create Account \n                    </label>\n                </div>\n            </form>\n            \n            </div>\n            </div> \n            </>\n      );\n    }\n\nexport default Login;  "]},"metadata":{},"sourceType":"module"}