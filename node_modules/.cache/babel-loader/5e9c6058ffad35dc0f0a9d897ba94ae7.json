{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/mac/Desktop/customer_portal_cls/locks&keys_frontend/src/component/login/ResetPassword.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport axiosInstance from '../../api/api';\nimport { Toast } from 'primereact/toast';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport { css } from \"@emotion/core\";\nconst override = css`\n  margin: 0 auto;\n  border-color: red;\n  background-color: transparent;\n  top:40%;\n  margin-left:-16%;\n`;\n\nlet ResetPassword = props => {\n  _s();\n\n  let tokenquery = new URLSearchParams(props.location.search).get(\"token\");\n  let history = useHistory();\n  let toast = useRef(null);\n  const initialFormData = Object.freeze({\n    new_password: '',\n    confirm_password: ''\n  });\n  const [formData, setFormData] = useState(initialFormData);\n  let [loading, setLoading] = useState(true);\n\n  const handleInputChange = e => {\n    let name = e.target.name;\n    let value = e.target.value;\n    setFormData({ ...formData,\n      [name]: value\n    });\n  };\n\n  const passwordValid = () => {\n    let isValid = true;\n\n    if (!(formData.new_password === formData.confirm_password)) {\n      toast.show({\n        severity: 'error',\n        detail: \"Password Not Matched\"\n      });\n      isValid = false;\n    }\n\n    return isValid;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const isValid = passwordValid();\n\n    if (isValid) {\n      setLoading(true);\n      let token = tokenquery;\n\n      try {\n        axiosInstance.post(`/api/customer/confirm/password/`, {\n          new_password: formData.new_password,\n          confirm_password: formData.confirm_password,\n          token: token\n        }).then(res => {\n          setLoading(false);\n          toast.show({\n            severity: 'success',\n            summary: 'Success Message',\n            detail: 'Order submitted'\n          });\n          setFormData({ ...formData,\n            new_password: '',\n            confirm_password: \"\"\n          });\n          history.push('/');\n        });\n      } catch (error) {\n        setLoading(false);\n        throw error;\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overlay-box1\",\n      style: {\n        margin: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(FadeLoader, {\n        css: override,\n        color: \"rgb(0, 158, 214)\",\n        loading: loading,\n        height: 30,\n        width: 5,\n        radius: 2,\n        margin: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 27\n    }, this) : '', /*#__PURE__*/_jsxDEV(Toast, {\n      ref: el => toast = el\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center own-login-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        style: {\n          marginTop: \"4.375rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontSize: \"1.875rem\",\n              textAlign: \"center\",\n              marginBottom: \"1.563rem\"\n            },\n            children: \"Reset Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"new_password\",\n            style: {\n              width: \"22rem\",\n              height: \"2.5rem\"\n            },\n            type: \"password\",\n            className: \"form-control\",\n            placeholder: \"New Password\",\n            value: formData.new_password,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"confirm_password\",\n            style: {\n              width: \"22rem\",\n              height: \"2.5rem\"\n            },\n            type: \"password\",\n            className: \"form-control\",\n            placeholder: \"Confirm New Password\",\n            value: formData.confirm_password,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              width: \"22rem\",\n              height: \"2.5rem\",\n              backgroundColor: \"#009ED6\"\n            },\n            className: \"btn btn-primary\",\n            type: \"submit\",\n            children: \"Change\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ResetPassword, \"msuHwgFNk7DlV8wk26r1Arz5gLg=\", false, function () {\n  return [useHistory];\n});\n\n_c = ResetPassword;\nexport default ResetPassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ResetPassword\");","map":{"version":3,"sources":["/Users/mac/Desktop/customer_portal_cls/locks&keys_frontend/src/component/login/ResetPassword.tsx"],"names":["React","useRef","useState","useHistory","axiosInstance","Toast","FadeLoader","css","override","ResetPassword","props","tokenquery","URLSearchParams","location","search","get","history","toast","initialFormData","Object","freeze","new_password","confirm_password","formData","setFormData","loading","setLoading","handleInputChange","e","name","target","value","passwordValid","isValid","show","severity","detail","handleSubmit","preventDefault","token","post","then","res","summary","push","error","margin","el","marginTop","fontSize","textAlign","marginBottom","width","height","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport axiosInstance from '../../api/api';\nimport { Toast } from 'primereact/toast';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport { css } from \"@emotion/core\";\n\nconst override = css`\n  margin: 0 auto;\n  border-color: red;\n  background-color: transparent;\n  top:40%;\n  margin-left:-16%;\n`;\n\nlet ResetPassword = (props:any) =>{\n     let tokenquery :any = new URLSearchParams(props.location.search).get(\"token\");\n     let history = useHistory();\n     let toast:any = useRef(null);\n     const initialFormData = Object.freeze({\n        new_password: '',\n        confirm_password: '',\n     });\n     const [formData, setFormData] = useState(initialFormData);\n     let [loading, setLoading] = useState<any>(true);\n     \n     const handleInputChange = (e: { target: { name: any; value: any; }; }) =>{\n         let name = e.target.name;\n         let value = e.target.value;\n         setFormData({...formData,[name]:value});\n     };\n\n     const passwordValid = () => {\n        let isValid =  true;\n        if(!(formData.new_password === formData.confirm_password)){\n         toast.show({severity: 'error', detail: \"Password Not Matched\"});\n         isValid = false;\n        }\n        return isValid\n     }\n \n     const handleSubmit = (e:any) => {\n         e.preventDefault();\n         const isValid = passwordValid();\n         if(isValid){\n            setLoading(true);\n         let token = tokenquery;\n         try{\n             axiosInstance\n             .post(`/api/customer/confirm/password/`, {\n                new_password: formData.new_password,\n                confirm_password: formData.confirm_password,\n                token:token,\n             })\n             .then((res) => {\n                  setLoading(false);\n                   toast.show({severity: 'success', summary: 'Success Message', detail: 'Order submitted'});\n                   setFormData({...formData,\n                    new_password:'',confirm_password:\"\"\n                 });\n                 history.push('/');\n             });\n         }catch(error){\n            setLoading(false);\n             throw error;\n         }\n        }\n     }\n    return(\n        <div>\n            {\n                loading ? <div className='overlay-box1'  style={{margin:0}}>\n                <FadeLoader css={override} color={\"rgb(0, 158, 214)\"} loading={loading}  height={30} width={5} radius={2} margin={20} />\n             </div> :''\n            }\n            <Toast ref={(el) => toast = el} />\n            <div className=\"d-flex justify-content-center own-login-container\">\n            \n                <form onSubmit={handleSubmit} style={{marginTop:\"4.375rem\"}}> \n                    <div>\n                      <label style={{fontSize:\"1.875rem\",textAlign:\"center\",marginBottom:\"1.563rem\"}}>Reset Password</label>\n                    </div>\n                    <div className=\"form-group\">\n                        <input name=\"new_password\" style={{width:\"22rem\",height:\"2.5rem\"}} type=\"password\" className=\"form-control\"  placeholder=\"New Password\" value={formData.new_password}  onChange={handleInputChange}/>\n                    </div>\n                    <div className=\"form-group\">\n                        <input name=\"confirm_password\" style={{width:\"22rem\",height:\"2.5rem\"}} type=\"password\" className=\"form-control\"  placeholder=\"Confirm New Password\" value={formData.confirm_password}  onChange={handleInputChange}/>\n                    </div>\n                    <div>\n                        <button style={{width:\"22rem\",height:\"2.5rem\",backgroundColor:\"#009ED6\"}} className=\"btn btn-primary\" type=\"submit\">Change</button>\n                    </div>\n                </form>\n                \n                </div>\n        </div>\n    )\n}\n\nexport default ResetPassword;"]},"metadata":{},"sourceType":"module"}